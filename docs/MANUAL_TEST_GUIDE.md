# 掲示板CRUD機能 - 手動テスト手順書

## 概要
本ドキュメントは、会員制掲示板アプリケーションのCRUD機能に関する手動テスト手順書です。

## テスト環境準備

### 前提条件
- アプリケーションが `http://localhost:3000` で起動していること
- MongoDBが正常に動作していること
- ブラウザ: Chrome (最新版) 推奨

### 実行前チェック
```bash
# 開発サーバー起動
npm run dev

# データベース接続確認
node -e "console.log('MongoDB URI:', process.env.MONGODB_URI || 'mongodb://localhost:27017/board-app')"
```

## テスト手順

### 1. 未ログイン時のアクセス制限テスト

#### 手順:
1. ブラウザで `http://localhost:3000/dashboard` にアクセス
2. リダイレクト先のURLを確認

#### 期待結果:
- [ ] `/auth/signin` にリダイレクトされること
- [ ] ログインフォームが表示されること

#### 追加確認:
- `/profile` へのアクセスも同様にリダイレクトされることを確認

---

### 2. ユーザー登録テスト

#### 手順:
1. `http://localhost:3000/auth/signup` にアクセス
2. 以下の情報を入力:
   - 名前: `テストユーザー_[現在時刻]`
   - メール: `test_[現在時刻]@example.com`
   - パスワード: `Test@123456`
   - パスワード確認: `Test@123456`
3. 「新規登録」ボタンをクリック

#### 期待結果:
- [ ] 登録処理が成功すること
- [ ] ダッシュボードページ（`/dashboard`）が表示されること
- [ ] ユーザー名がヘッダーに表示されること

#### エラー確認:
- [ ] 既存メールアドレスで登録を試みた場合、エラーメッセージが表示されること
- [ ] パスワードが一致しない場合、エラーメッセージが表示されること

---

### 3. ログイン・ログアウトテスト

#### ログイン手順:
1. `http://localhost:3000/auth/signin` にアクセス
2. 登録したユーザー情報を入力:
   - メール: 手順2で登録したメールアドレス
   - パスワード: `Test@123456`
3. 「ログイン」ボタンをクリック

#### ログイン期待結果:
- [ ] ダッシュボード（`/dashboard`）が表示されること
- [ ] ユーザー情報が表示されること

#### ログアウト手順:
1. ヘッダーのアバターアイコンをクリック
2. 「ログアウト」を選択

#### ログアウト期待結果:
- [ ] ログインページにリダイレクトされること
- [ ] セッションがクリアされること

---

### 4. 投稿の作成テスト

#### 前提:
- ログイン済みであること

#### 手順:
1. ダッシュボードの投稿フォームを確認
2. 以下の内容を入力:
   - 投稿内容: `テスト投稿 [現在時刻]\nこれは手動テストの投稿です。`
3. 「投稿」ボタンをクリック

#### 期待結果:
- [ ] 投稿が即座に表示されること
- [ ] 投稿者名が表示されること
- [ ] 投稿時刻が表示されること
- [ ] 入力フォームがクリアされること
- [ ] 文字数カウンターがリセットされること

---

### 5. 投稿一覧の表示（新着順）テスト

#### 手順:
1. 3つ以上の投稿を連続で作成:
   - 投稿1: `最初の投稿`
   - 投稿2: `2番目の投稿`
   - 投稿3: `最新の投稿`
2. ページをリロード（F5キー）

#### 期待結果:
- [ ] 最新の投稿が一番上に表示されること
- [ ] 投稿が時系列順（降順）で並んでいること
- [ ] 各投稿に投稿者名と時刻が表示されること

---

### 6. 自分の投稿の編集テスト

#### 手順:
1. 自分が作成した投稿を確認
2. 編集アイコン（鉛筆マーク）をクリック
3. 編集ダイアログで内容を変更:
   - 変更前: `元の内容`
   - 変更後: `編集後の内容 [現在時刻]`
4. 「更新」ボタンをクリック

#### 期待結果:
- [ ] 編集ダイアログが開くこと
- [ ] 現在の投稿内容が表示されること
- [ ] 更新後、新しい内容が即座に反映されること
- [ ] 編集ダイアログが自動的に閉じること

---

### 7. 自分の投稿の削除テスト

#### 手順:
1. 削除用のテスト投稿を作成
2. 削除アイコン（ゴミ箱マーク）をクリック
3. 確認ダイアログで「OK」を選択

#### 期待結果:
- [ ] 確認ダイアログが表示されること
- [ ] 削除後、投稿が一覧から消えること
- [ ] ページリロード後も削除が維持されること

#### キャンセルテスト:
- [ ] 確認ダイアログで「キャンセル」を選択した場合、投稿が残ること

---

### 8. 他人の投稿の編集・削除制限テスト

#### 手順:
1. ユーザー1でログインし、投稿を作成
2. ログアウト
3. 別のユーザー（ユーザー2）で新規登録・ログイン
4. ユーザー1の投稿を確認

#### 期待結果:
- [ ] ユーザー1の投稿が表示されること
- [ ] ユーザー1の投稿に編集・削除ボタンが表示されないこと
- [ ] ユーザー2自身の投稿には編集・削除ボタンが表示されること

---

### 9. 文字数制限テスト

#### 手順:
1. 投稿フォームに200文字ちょうど入力
2. 201文字目を入力しようとする

#### 期待結果:
- [ ] 文字数カウンターが「200/200」と表示されること
- [ ] 201文字目が入力できないこと
- [ ] 投稿ボタンは有効のままであること

#### 追加テスト:
- [ ] コピー&ペーストで200文字以上を貼り付けた場合、200文字で切り捨てられること

---

### 10. 空投稿の制限テスト

#### 手順:
1. 投稿フォームを空のままにする
2. 投稿ボタンの状態を確認

#### 期待結果:
- [ ] 投稿ボタンが無効（disabled）状態であること
- [ ] 1文字入力すると投稿ボタンが有効になること
- [ ] 再度空にすると投稿ボタンが無効になること

---

### 11. セッションタイムアウトテスト

#### 手順:
1. ログイン
2. ブラウザの開発者ツールを開く（F12）
3. Application > Cookies でセッションCookieを削除
4. ページをリロード

#### 期待結果:
- [ ] ログインページにリダイレクトされること
- [ ] 適切なメッセージが表示されること

---

### 12. XSSセキュリティテスト

#### 手順:
1. 以下のような悪意のあるコードを投稿:
   ```
   <script>alert('XSS')</script>
   <img src=x onerror="alert('XSS')">
   ```

#### 期待結果:
- [ ] スクリプトが実行されないこと
- [ ] HTMLタグがエスケープされて表示されること
- [ ] アラートが表示されないこと

---

## パフォーマンステスト

### レスポンス時間測定

#### 手順:
1. 開発者ツールのNetworkタブを開く
2. 以下の操作を行い、レスポンス時間を記録:
   - 投稿作成
   - 投稿編集
   - 投稿削除

#### 合格基準:
- [ ] 投稿作成: 2秒以内
- [ ] 投稿編集: 2秒以内
- [ ] 投稿削除: 1秒以内
- [ ] ページ読み込み: 3秒以内

---

## アクセシビリティテスト

### キーボードナビゲーション

#### 手順:
1. マウスを使わずキーボードのみで操作
2. Tabキーで要素間を移動
3. Enterキーで操作を実行

#### 確認項目:
- [ ] Tabキーですべての操作要素にアクセスできること
- [ ] フォーカスが視覚的に確認できること
- [ ] Enterキーで投稿・編集・削除ができること

### スクリーンリーダー対応

#### 手順:
1. スクリーンリーダーを有効化（Windows: ナレーター、Mac: VoiceOver）
2. 各要素を読み上げさせる

#### 確認項目:
- [ ] フォーム要素に適切なラベルがあること
- [ ] ボタンに適切なaria-labelがあること
- [ ] エラーメッセージが読み上げられること

---

## レスポンシブデザインテスト

### デバイス別表示確認

#### 手順:
1. 開発者ツールでデバイスエミュレーションを使用
2. 以下のサイズで表示を確認:
   - モバイル: 375x667 (iPhone SE)
   - タブレット: 768x1024 (iPad)
   - デスクトップ: 1920x1080

#### 確認項目:
- [ ] すべてのデバイスサイズで正常に表示されること
- [ ] ボタンがタップしやすいサイズであること
- [ ] 文字が読みやすいサイズであること
- [ ] 横スクロールが発生しないこと

---

## テスト結果記録

### テスト実施情報
- テスト実施日: _______________
- テスト実施者: _______________
- ブラウザ/バージョン: _______________
- 環境: _______________

### 総合結果
- [ ] すべてのテスト項目をクリア
- [ ] 不具合があった場合は以下に記載:

### 不具合詳細
| No. | テスト項目 | 現象 | 再現手順 | 優先度 |
|-----|----------|------|---------|--------|
| 1   |          |      |         |        |
| 2   |          |      |         |        |

### 改善提案
1. 
2. 
3. 

---

## 補足事項

### よくある問題と対処法

1. **MongoDBエラー**
   - 接続エラーの場合は環境変数 `MONGODB_URI` を確認
   - ローカルMongoDBが起動しているか確認

2. **セッションエラー**
   - NextAuth設定を確認
   - 環境変数 `NEXTAUTH_SECRET` が設定されているか確認

3. **パフォーマンス問題**
   - ネットワークタブで遅いリクエストを特定
   - データベースのインデックスを確認

### 連絡先
- 開発チーム: dev-team@example.com
- QAチーム: qa-team@example.com

---

最終更新: 2025年8月23日