# ✅ ログイン機能テストチェックリスト
**20人天才エンジニア会議作成**

## 🔧 準備フェーズ

### 環境準備
- [ ] MongoDB起動確認
- [ ] 環境変数設定確認（`.env.local`）
- [ ] Next.jsサーバー起動（`npm run dev`）
- [ ] テストアカウント作成（`node scripts/create-test-accounts.js`）

### テストアカウント確認
- [ ] verified@test.com / Test123! （確認済み）
- [ ] unverified@test.com / Test123! （未確認）
- [ ] admin@test.com / Admin123! （管理者）
- [ ] locked@test.com / Locked123! （ロック中）
- [ ] expired@test.com / Expired123! （期限切れ）

---

## 🧪 機能テスト

### TEST-1: 正常なログインフロー ⭐重要
**テスター:** _______________  **日時:** _______________

- [ ] ログインページ表示（`/auth/signin`）
- [ ] verified@test.com でログイン入力
- [ ] パスワード Test123! 入力
- [ ] ログインボタンクリック
- [ ] ダッシュボードへリダイレクト
- [ ] ヘッダーにユーザー名表示
- [ ] アバター表示確認
- [ ] DevToolsでCookie確認
  - [ ] authjs.session-token 存在
  - [ ] authjs.csrf-token 存在

**結果:** ⬜ PASS / ⬜ FAIL  
**メモ:** _________________________________

---

### TEST-2: 間違ったパスワード
**テスター:** _______________  **日時:** _______________

- [ ] verified@test.com 入力
- [ ] 間違ったパスワード入力（WrongPass!）
- [ ] エラーメッセージ表示確認
- [ ] ログインページに留まる
- [ ] メールアドレスが保持される
- [ ] Cookie作成されない

**結果:** ⬜ PASS / ⬜ FAIL  
**メモ:** _________________________________

---

### TEST-3: 未認証メールアドレス
**テスター:** _______________  **日時:** _______________

- [ ] unverified@test.com でログイン試行
- [ ] 正しいパスワード入力（Test123!）
- [ ] エラー表示「メール確認が必要です」
- [ ] `/auth/email-not-verified` へリダイレクト
- [ ] 再送信ボタン表示
- [ ] Cookieなし確認

**結果:** ⬜ PASS / ⬜ FAIL  
**メモ:** _________________________________

---

### TEST-4: ログアウト処理
**テスター:** _______________  **日時:** _______________

**前提:** ログイン済み状態

- [ ] メニューボタンクリック
- [ ] ドロワー表示
- [ ] ユーザー情報表示確認
- [ ] ログアウトボタンクリック
- [ ] トップページへリダイレクト
- [ ] ヘッダーが未ログイン表示
- [ ] Cookie削除確認
- [ ] `/dashboard` アクセス → ログインページへ

**結果:** ⬜ PASS / ⬜ FAIL  
**メモ:** _________________________________

---

### TEST-5: セッション維持
**テスター:** _______________  **日時:** _______________

**前提:** ログイン済み状態

#### ページ遷移テスト
- [ ] ホーム → ダッシュボード
- [ ] ダッシュボード → 掲示板
- [ ] 掲示板 → プロフィール
- [ ] 各ページでログイン状態維持

#### リロードテスト
- [ ] F5でページリロード
- [ ] ログイン状態維持
- [ ] ユーザー情報表示維持

#### 新規タブテスト
- [ ] 新しいタブで開く
- [ ] ログイン状態共有確認

**結果:** ⬜ PASS / ⬜ FAIL  
**メモ:** _________________________________

---

### TEST-6: ヘッダー表示切り替え
**テスター:** _______________  **日時:** _______________

#### 未ログイン時
- [ ] 「ログイン」ボタン表示
- [ ] ユーザー情報非表示
- [ ] ドロワーに「ログイン」項目

#### ログイン後
- [ ] ユーザー名表示
- [ ] アバター表示（イニシャル）
- [ ] 「掲示板」ボタン表示
- [ ] 「ダッシュボード」ボタン表示
- [ ] ドロワーに「ログアウト」ボタン

#### レスポンシブ
- [ ] モバイル表示確認（375px）
- [ ] タブレット表示確認（768px）
- [ ] デスクトップ表示確認（1920px）

**結果:** ⬜ PASS / ⬜ FAIL  
**メモ:** _________________________________

---

## 🔒 セキュリティテスト

### セキュリティ項目
**テスター:** _______________  **日時:** _______________

- [ ] SQLインジェクション試行（`' OR '1'='1`）
- [ ] XSS試行（`<script>alert('XSS')</script>`）
- [ ] CSRFトークン確認
- [ ] HTTPSリダイレクト（本番環境）
- [ ] パスワードマスキング確認
- [ ] セッション固定化攻撃対策

**結果:** ⬜ PASS / ⬜ FAIL  
**メモ:** _________________________________

---

## ⚡ パフォーマンステスト

### 応答時間測定
**テスター:** _______________  **日時:** _______________

| 項目 | 目標値 | 実測値 | 結果 |
|------|--------|--------|------|
| ログインページ表示 | < 2秒 | _____ | ⬜ |
| ログイン処理 | < 2秒 | _____ | ⬜ |
| ログアウト処理 | < 1秒 | _____ | ⬜ |
| セッション確認 | < 500ms | _____ | ⬜ |

---

## ♿ アクセシビリティテスト

### アクセシビリティ項目
**テスター:** _______________  **日時:** _______________

- [ ] キーボードのみで操作可能
- [ ] Tab順序が論理的
- [ ] Enterキーでフォーム送信
- [ ] Escキーでドロワー閉じる
- [ ] aria-label適切
- [ ] エラーメッセージ読み上げ対応
- [ ] コントラスト比4.5:1以上

**結果:** ⬜ PASS / ⬜ FAIL  
**メモ:** _________________________________

---

## 🤖 自動テスト実行

### 自動テストコマンド
**実行者:** _______________  **日時:** _______________

```bash
# クイックテスト
node scripts/quick-login-test.js
```

- [ ] 全テスト成功
- [ ] エラーなし確認

**実行結果:**
```
成功: _____ 件
失敗: _____ 件
合格率: _____ %
```

---

## 📊 最終評価

### 総合評価
**評価者:** _______________  **日時:** _______________

| カテゴリ | スコア | メモ |
|----------|--------|------|
| 機能完全性 | ___/100 | |
| セキュリティ | ___/100 | |
| パフォーマンス | ___/100 | |
| ユーザビリティ | ___/100 | |
| アクセシビリティ | ___/100 | |

**総合スコア:** ___/100

### 判定
- ⬜ **合格** - すべての必須項目クリア
- ⬜ **条件付き合格** - 軽微な問題あり
- ⬜ **不合格** - 重大な問題あり

### 発見された問題

| # | 問題 | 優先度 | 担当 |
|---|------|--------|------|
| 1 | | | |
| 2 | | | |
| 3 | | | |

### 改善提案

1. _________________________________
2. _________________________________
3. _________________________________

---

## 📝 承認

| 役割 | 名前 | 署名 | 日付 |
|------|------|------|------|
| QAリード | | | |
| 開発リード | | | |
| プロダクトマネージャー | | | |

---

**チェックリスト作成:** 20人天才エンジニア会議  
**最終更新:** 2024年現在