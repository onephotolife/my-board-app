# ダッシュボードページ文字列変更に関する詳細調査レポート

## 調査概要
- **調査日時**: 2025-08-25
- **調査者**: チーフシステムアーキテクト
- **対象**: ダッシュボードページの「会員制掲示板」を「ダッシュボード」に変更する影響

## 1. 現在の実装状況

### 1.1 メインカラムの文字
- **ファイル**: `src/app/dashboard/page.tsx`
- **位置**: 207行目
- **現在の表示**: `<Typography variant="h4">会員制掲示板</Typography>`
- **影響範囲**: ダッシュボードページのメインコンテンツエリアのみ

### 1.2 共通メニューの文字
- **ファイル**: `src/components/AppLayout.tsx`
- **位置**: 
  - 67行目: ナビゲーションメニューのラベル
  - 331行目: ヘッダーのデフォルトタイトル
- **現在の表示**: 
  - ナビゲーション: `label: '会員制掲示板'`
  - ヘッダー: `{title || '会員制掲示板'}`
- **影響範囲**: AppLayoutを使用する全ページ（dashboard、my-posts、privacy、terms、profile、posts/new）

## 2. 「会員制掲示板」文字列の使用箇所（全65ファイル）

### 2.1 重要度：高
| ファイル | 用途 | 変更必要性 |
|---------|------|------------|
| `src/app/layout.tsx` | サイトのメタデータ（title、OGP、twitter） | 要検討 |
| `src/lib/mail/sendMail.ts` | メール送信者名 | 要検討 |
| `src/app/page.tsx` | トップページのタイトル | 要検討 |
| `src/components/AppLayout.tsx` | 共通レイアウト | **必須** |
| `src/app/dashboard/page.tsx` | ダッシュボードタイトル | **必須** |

### 2.2 重要度：中
| ファイル | 用途 | 変更必要性 |
|---------|------|------------|
| `src/app/privacy/page.tsx` | プライバシーポリシー内の記載 | 要検討 |
| `src/app/terms/page.tsx` | 利用規約内の記載 | 要検討 |
| `src/components/ClientHeader.tsx` | ヘッダー表示 | 要確認 |
| `src/components/PureHeader.tsx` | ピュアHTMLヘッダー | 要確認 |
| `src/components/ModernHeader.tsx` | モダンヘッダー | 要確認 |

### 2.3 重要度：低（コメント・ドキュメント）
- 認証関連ファイル（auth.ts、auth.config.ts）のコメント
- テストファイル
- ドキュメントファイル

## 3. コメント機能に関する調査結果

### 3.1 現状
- **コメント機能は未実装**
- `src/components/EnhancedPostCard.tsx`にUIのみ存在するが、以下の状態：
  - 253行目: `// TODO: コメント投稿機能の実装`
  - 265行目: `※ コメント機能は今後実装予定です`
  - **このコンポーネント自体が未使用（デッドコード）**

### 3.2 実際の投稿表示フロー
```
BoardClient → VirtualizedPostList → PostItem
```
- EnhancedPostCardは使用されていない
- PostItemコンポーネントにはコメント機能なし

### 3.3 結論
**コメント表示の問題は存在しない**（そもそもコメント機能が実装されていない）

## 4. 文字列変更による潜在的エラー

### 4.1 技術的エラー
- **発生確率: 低**
- 単純な文字列変更のため、実行時エラーは発生しない
- TypeScriptの型エラーも発生しない

### 4.2 表示の不整合
- **発生確率: 高**
- メニューと実際のページタイトルの不一致
- メタデータとページ内容の不一致
- メール通知の送信者名との不一致

### 4.3 UXの混乱
- **発生確率: 中**
- 「会員制掲示板」と「ダッシュボード」の混在による混乱
- ブランディングの一貫性の欠如

## 5. 推奨される変更手順

### Phase 1: 必須変更（ダッシュボードページのみ）
```typescript
// src/app/dashboard/page.tsx (207行目)
- <Typography variant="h4">会員制掲示板</Typography>
+ <Typography variant="h4">ダッシュボード</Typography>

// src/components/AppLayout.tsx (67行目)
- label: '会員制掲示板',
+ label: 'ダッシュボード',
```

### Phase 2: 推奨変更（一貫性のため）
```typescript
// src/app/layout.tsx
- title: { default: "会員制掲示板", template: "%s | 会員制掲示板" }
+ title: { default: "会員制掲示板", template: "%s | 会員制掲示板" }
// ※ サイト全体のタイトルは維持を推奨

// src/app/dashboard/layout.tsx（新規作成を推奨）
export const metadata: Metadata = {
  title: 'ダッシュボード',
}
```

## 6. リスク評価

| リスク項目 | 影響度 | 発生確率 | 対策 |
|-----------|--------|----------|------|
| 実行時エラー | 低 | 極低 | なし |
| 表示の不整合 | 中 | 高 | 全箇所の統一的な変更 |
| SEOへの影響 | 中 | 低 | メタデータの適切な設定 |
| ユーザーの混乱 | 低 | 中 | 告知・ドキュメント更新 |

## 7. 結論と提言

### 7.1 主要な発見
1. **コメント機能は未実装**であり、コメント表示の問題は存在しない
2. 「会員制掲示板」という文字列は65ファイルで使用されている
3. 変更による技術的エラーのリスクは極めて低い
4. 主な課題は表示の一貫性の維持

### 7.2 推奨事項
1. **最小限の変更**: dashboard/page.tsxとAppLayout.tsxの2箇所のみ変更
2. **段階的移行**: まずダッシュボード関連のみ変更し、影響を確認
3. **一貫性の確保**: 変更する場合は関連箇所を全て統一的に変更
4. **テストの実施**: 変更後は全ページの表示確認を実施

### 7.3 注意事項
- サイト全体のブランディング（「会員制掲示板」）との整合性を考慮
- メール通知等の外部コミュニケーションとの一貫性を確保
- 法的文書（利用規約、プライバシーポリシー）の変更は慎重に

## 8. 実装推奨度
**★★★☆☆（3/5）**

技術的には容易だが、ブランディングと一貫性の観点から慎重な検討が必要。
部分的な変更よりも、サイト全体の統一的な変更を推奨。